#!/bin/sh

# Set session type.
export XDG_SESSION_TYPE=x11

# X11 configuration directory.
X11_DIR="${XDG_CONFIG_HOME:-$HOME/.config}"/X11

# Source autostart script(s).
if test -d "$X11_DIR"/xinitrc.d; then
	for File in "$X11_DIR"/xinitrc.d/*.sh; do
		test -f "$File" -a -x "$File" && . "$File"
	done
	unset -v File
fi

# Xresources.
Xresources="$X11_DIR"/Xresources
if test -f "$Xresources" -a -r "$Xresources"; then
	xrdb "$Xresources"
fi

# Unset variables.
unset -v X11_DIR Xresources

# Turn off screen-saver.
xset -dpms s off

# Keyboard layout.
setxkbmap us grammak_iso

# Set the cursor.
xsetroot -cursor_name left_ptr

# Hotkey daemon.
sxhkd &

# Notification daemon.
dunst &

# Notify about update(s).
while :; do
	pacman -Qqu &&
	dunstify -u critical -r 86 "There's an update(s)..."
	sleep 60m
done &

# URxvt daemon.
urxvtd -q -o -f

# Eyes-saver.
redshift -PrO 4500

# Wallpaper.
feh --bg-fill --no-fehbg "$HOME"/Pictures/cWallpapers/Wallpaper_002.png &

# Compositor.
picom -b

# X11 session.
exec bspwm
